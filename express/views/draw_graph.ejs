<script>
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(drawChart);

function drawChart() {
  var data = google.visualization.arrayToDataTable([
    ['len', 'Experience'],
    [0, 0],
    <% 
    let sum = 0;
    console.log(data);
    for (let i = 0; i < data.length; i++) {
      const subject = data[i].dataValues;
      sum += subject.score;
    %>
    [<%= i + 1 %>, <%= sum %>],
    <% } %>
  ]);

  var options = {
    title: 'Experience Graph',
    curveType: 'function',
    legend: { position: 'bottom' },
    width: 800,
    height: 400
  };

  var chart = new google.visualization.LineChart(document.getElementById('graph'));
  chart.draw(data, options);
}
</script>
